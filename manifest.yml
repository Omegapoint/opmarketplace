---
# Shared properties
buildpack: java_buildpack
memory: 1024M
services:
  - newrelic

# Application specific
applications:
- name: messageservice
  host: messageservice-opm
  path: messageservice/build/libs/messageservice-0.0.1-SNAPSHOT.jar

- name: customer
  host: customer-opm

  path: customer/build/libs/customer-0.0.1-SNAPSHOT.jar
  env:
    SUBSCRIPTION_URL: http://messageservice-opm.cfapps.io/subscribe
    EVENT_PUBLISHER_URL: http://messageservice-opm.cfapps.io/event
    EVENT_RECEIVER_URL: http://customer-opm.cfapps.io/event

- name: apigateway
  host: apigateway-opm
  path: apigateway/build/libs/apigateway-0.0.1-SNAPSHOT.jar
  env:
    SUBSCRIPTION_URL: http://messageservice-opm.cfapps.io/subscribe
    EVENT_PUBLISHER_URL: http://messageservice-opm.cfapps.io/event
    EVENT_RECEIVER_URL: http://apigateway-opm.cfapps.io/event
